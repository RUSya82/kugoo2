"use strict";window,addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".header__burger"),s=document.querySelector(".header__nav"),e=document.querySelector(".header__menu"),i=document.querySelector(".close");function c(){s.classList.remove("show"),document.body.style.overflow=""}t.addEventListener("click",(function(){s.classList.add("show"),s.classList.remove("hide"),document.body.style.overflow="hidden"})),i.addEventListener("click",c),e.addEventListener("click",c),document.addEventListener("click",t=>{t.target===s&&c()});!function(t,s){const e=t.querySelector(".marquee__inner"),i=e.offsetWidth,c=e.cloneNode(!0);t.appendChild(c);let a,r,n=performance.now();requestAnimationFrame((function t(d){a=(d-n)/s,a>1&&(a%=1,n=d),r=i*a,e.style.transform=`translate3d(-${r}px, 0 , 0)`,c.style.transform=`translate3d(-${r}px, 0 , 0)`,requestAnimationFrame(t)}))}(document.querySelector("#marquee1"),15e3);const a=async t=>{const s=await fetch(t);if(!s.ok)throw new Error("Could not fetch "+t);return await s.json()};class r{constructor(t,s,e,i,c,a,r,n,d,l,o,h,p){this.id=t,this.img=s,this.alt=e,this.title=i,this.subtitle=c,this.perent=document.querySelector(p),this.price=a,this.priceOld=r,this.text=n,this.credit=d,this.orderFirst=o,this.orderLast=h,this.characteristics=l}render(){const t=document.createElement("div");t.classList.add("kugoo"),t.innerHTML=`\n          <div class="product__box" id=${this.id}>\n            <div class="container">\n                <div class="row">\n                    <div class="col-12 col-sm-12 col-md-12 col-lg-6 ${this.orderLast} col-xl-6 col-xxl-6">\n                        <div class="product__block">\n                            <img src=${this.img} alt=${this.alt} class="product__image">\n                        </div>\n                    </div>\n                    <div class="col-12 col-sm-12 col-md-12 col-lg-6 ${this.orderFirst} col-xl-6 col-xxl-6">\n                        <div class="product__info">\n                            <h4 class="product__title">${this.title}</h4>\n                            <span class="product__subtitle">${this.subtitle}</span>\n                            <div class="product__page">\n                                <span class="product__price">${this.price}</span>\n                                <s class="product__price-old">${this.priceOld}</s>\n                            </div>\n                            <div class="product__characteristic">\n                                <ul class="product__information">\n                                    <li class="li product__desc">Вес: <span>${this.characteristics.weight}</span></li>\n                                    <li class="li product__desc">Время зарядки: <span>${this.characteristics.chargingTime}</span></li>\n                                    <li class="li product__desc">Дальность хода: <span>${this.characteristics.travelRange}</span></li>\n                                    <li class="li product__desc">Мах. скорость: <span>${this.characteristics.machSpeed}/ч</span></li>\n                                    <li class="li product__desc">Мах. нагрузка: <span>${this.characteristics.machLoad}</span></li>\n                                    <li class="li product__desc">Диаметр колёс: <span>${this.characteristics.wheelDiameter}</span></li>\n                                    <li class="li product__desc">Мощность мотора: <span>${this.characteristics.motorPower}</span></li>\n                                    <li class="li product__desc">Ёмкость аккумулятора:  <span>${this.characteristics.batteryCapacity}</span></li>\n                                    <li class="li product__desc">Опции: <span>${this.characteristics.options}</span></li>\n                                </ul>\n                            </div>\n                            <div class="product__aside">\n                                <p class="product__text"><strong>${this.title}</strong>${this.text}</p>\n                            </div>\n                            <div class="product__holder">\n                                <button class="product__credit" data-subtitle="${this.title}" data-image="${this.img}" data-alt="${this.alt}" data-bs-toggle="modal" data-price="${this.credit}" data-bs-target="#exampleModalCredit" onclick="ym(76080295,'reachGoal','credit')";>В расрочку — от ${this.credit}</button>\n                                <button class="button" data-bs-toggle="modal" data-subtitle="${this.title}" data-price="${this.price}" data-image="${this.img}"  data-alt="${this.alt}" data-bs-target="#exampleModalCheckout" onclick="ym(76080295,'reachGoal','buy')";>Купить</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n      `,this.perent.append(t)}}a(`http://${window.location.hostname}/db.json`).then(t=>{t.product.forEach(({id:t,img:s,alt:e,title:i,subtitle:c,price:a,priceOld:n,text:d,credit:l,characteristics:o,orderFirst:h,orderLast:p})=>{new r(t,s,e,i,c,a,n,d,l,o,h,p,".product").render()})}),a(`http://${window.location.hostname}/db.json`).then(t=>{t.expensive.forEach(({id:t,img:s,alt:e,title:i,subtitle:c,price:a,priceOld:n,text:d,credit:l,characteristics:o,orderFirst:h,orderLast:p})=>{new r(t,s,e,i,c,a,n,d,l,o,h,p,".expensive").render()})})});
document.addEventListener("DOMContentLoaded",()=>{const e=e=>fetch("send.php",{body:e,method:"POST"}),t=()=>{const e=new bootstrap.Modal(modalThanks);e.show(),setTimeout(()=>{e.hide()},3e3)},n=(e,t="+7 (___) ___-__-__")=>{const n=document.querySelectorAll(e);function o(e){const n=e.keyCode,o=t,r=o.replace(/\D/g,""),a=this.value.replace(/\D/g,"");let l=0,d=o.replace(/[_\d]/g,(function(e){return l<a.length?a.charAt(l++)||r.charAt(l):e}));l=d.indexOf("_"),-1!=l&&(d=d.slice(0,l));let c=o.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");c=new RegExp("^"+c+"$"),(!c.test(this.value)||this.value.length<5||n>47&&n<58)&&(this.value=d),"blur"==e.type&&this.value.length<5&&(this.value="")}for(const e of n)e.addEventListener("input",o),e.addEventListener("focus",o),e.addEventListener("blur",o)};n("input[name=tel]"),n("input[name=phone]");(()=>{const n=document.querySelector("#exampleModalQuestion"),o=document.querySelector("#exampleModal"),r=document.querySelector("#exampleModalCheckout"),a=document.querySelector("#exampleModalCredit"),l=document.querySelector("#exampleModalSupport"),d=n=>{const o=n.querySelector(".modal-header h5"),r=n.querySelector(".modal-header span"),a=n.querySelector(".modal-header img"),l=n.querySelector("form"),d=n.querySelector(".modal-price");l.addEventListener("submit",c=>{c.preventDefault();const s=new FormData(l),u=s.getAll("name"),i=u[0],m=u[1];if(s.set("name",i.trim()),m&&s.append("address",m.trim()),s.append("head",o.textContent),a){const e=`http://${window.location.hostname}${a.getAttribute("src")}`;s.append("image",e)}let p="";d&&(p=d.textContent.replace(/Итого:/,"")),s.append("price",p);const h=r.textContent;s.append("productName",h),e(s).then(e=>{if(200!==e.status)throw new Error("status not 200");return e.text()}).then(e=>{l.reset(),bootstrap.Modal.getInstance(n).hide(),setTimeout(t,500)}).then(()=>{}).catch(e=>{console.error(e)})})};d(n),d(o),d(r),d(a),d(l)})();(()=>{const n=document.getElementById("help"),o=n.querySelector("h3");n.querySelector("form").addEventListener("submit",n=>{const r=n.target;n.preventDefault();const a=new FormData(r);a.append("head",o.textContent),e(a).then(e=>{if(200!==e.status)throw new Error("status not 200");return e.text()}).then(e=>{r.reset(),t()}).catch(e=>{console.error(e)})})})();(()=>{const e=document.querySelector("#exampleModalCheckout"),t=document.querySelector("#exampleModalCredit"),n=e=>{e.addEventListener("show.bs.modal",(function(t){const n=e.querySelector(".modal-header span"),o=e.querySelector(".modal-header img"),r=e.querySelector(".modal-price"),a=t.relatedTarget;a.getAttribute("data-whatever");n.textContent=a.dataset.subtitle,r.textContent=a.dataset.price,o.setAttribute("src",a.dataset.image),o.setAttribute("alt",a.dataset.alt)}))};n(e),n(t)})()});
//# sourceMappingURL=../sourcemaps/main.min.js.map
